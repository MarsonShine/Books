# UDP/IP

UDP 全称“用户数据报协议（User Datagram Protocol）”。它是一个简单的，单纯的协议，只管发送数据报给用户。给用户进程提供**端口号**和**校验和**。

校验和的作用是防止数据被串改，利用算法把发送的数据包装成这个校验和，当发送数据报到目标端是，就会用一致的算法将数据报内容包装与这个校验和比较，一致就说明数据是正常的。

首先要明确一点就是在链路层通常可传输的每个帧都有最大长度限制。为了保持 IP 数据报抽象与链路层细节的一致和分离，IP 引入了**分析和重组**

IP 比较处出接口的 MTU 和数据的大小，如果数据报太大则会进行分片。分片之后，只有到目标地址才会被重组。其原因是：1. 网络中不重组的开销要比重组要大。2. 同一数据库的不同分片可以经由不同的路径到相同的目的地。

每个应用程序每个 UDP 端口均有一个大小有限的队列与之对应。也就是说来自不同客户机几乎同时到达的请求会被 UDP 自动排到队列里。接收到的 UDP 数据报以它们到达的顺序（即 FCFS ——先到先服务）被传送给应用程序（当它请求下一个时）。当请求压积越多最后队列塞满，这个队列就会溢出。但是 UDP 不会对此做任何防护措施，就像前面说的，它是一个简单的协议，仅仅只是给用户发送数据报。并且 **UDP 是无连接协议**，**自身没有可靠机制**，**所以 UDP 在遇到队列满的时候，会丢弃后面过来的数据报**。这整个过程就称之为 “网络阻塞”。

