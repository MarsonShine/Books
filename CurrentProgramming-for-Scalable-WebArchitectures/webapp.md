# Web 应用程序

网络上有大量不同的应用程序。在下文中，我们将区分两种不同类型的网络应用程序--网站和网络服务。网站是基于网络的应用程序，专为人类和基于浏览器的访问而设计。相比之下，网络服务是基于网络的端对端通信接口。虽然这种区分比较随意，但它有助于我们识别不同的要求和功能。

## 网站

网站已经从超链接、基于文本的研究文档发展成为高度交互、社交和协作的应用程序，用于多种不同的目的。网站内容变得越来越动态，并以用户提供的内容为基础。JS、AJAX 和 HTML5 等网络技术引入了更具交互性的用户界面，推动了这一转变。得益于现代浏览器提供的强大 API，网络应用程序已经开始取代传统的桌面应用程序和本地移动应用程序。

下面我们将介绍一些在可扩展性和并发性方面颇受欢迎的网站类型。

### 实例：社交网站

社交网络是将社交互动转移到网络上的网站。它们通常试图反映用户在现实世界中的社会关系（如 [Facebook](http://www.facebook.com/)）或关注特定主题（如旅游网站 [dopplr](http://www.dopplr.com/)）。社交网站鼓励用户进行互动，例如通过即时通讯。此外，社交网络在很大程度上依赖于用户生成的内容和特定语境数据，如地理标记内容。用户的内容和行为通常会发布到活动流中，提供“实时”更新，其他用户可以实时观看。

### 实例： 协作式网络应用程序

这些网络应用允许一群人通过网络进行协作。传统的例子是 wiki 系统，用户可以集体编辑文本文档的版本。最新的协作应用程序则加入了软实时功能。例如，[Etherpad](http://etherpad.org/) 是一款基于网络的文字处理器，支持多个用户同时处理同一文档。

### 实例：电子商务网站 电子商务网站

[亚马逊](http://www.amazon.com/)等电子商务网站是网上销售产品的传统商业网站。有趣的是，许多网站将社交网站的功能用于商业目的。通过评论、评级和标记产品，用户在这些网站上的参与不仅仅是购买商品。然后，用户生成的内容被用来对产品项目进行聚合分析，并计算出准确的推荐结果。因此，商业网站在某种程度上面临着与社交网站类似的挑战。

## 网络服务

网络服务使用 HTTP 提供对应用服务的访问。因此，网络服务虽然基于网络技术，但通常类似于 RPC 或消息传递等传统的分布式计算机制。

与网站不同，网络服务首先不以直接（人类）用户访问为目标。相反，网络服务通过接口和结构化信息实现端与端之间的通信，并提供应用功能。一些网络应用程序同时提供网站和 API。网站用于基于浏览器的访问，而网络服务则可用于定制应用程序，如移动客户端应用程序或基于脚本程序的服务交互。

### XML-RPC

XML-RPC 是将基于 RPC 的传统服务转移到网络的首批尝试之一。它利用 HTTP `POST` 请求调度过程调用，并为调用参数和返回值提供基于 XML 的序列化格式。下面列举了一个取自原始规范的示例：

```
POST /RPC2 HTTP/1.0
User-Agent: Frontier/5.1.2 (WinNT)
Host: betty.userland.com
Content-Type: text/xml
Content-Length: 181

<?xml version="1.0"?> <methodCall> <methodName>examples.getStateName</methodName> <params> <param> <value><i4>41</i4></value> </param> </params> </methodCall>

HTTP/1.1 200 OK
Connection: close
Content-Length: 158
Content-Type: text/xml
Date: Fri, 17 Jul 1998 19:55:08 GMT
Server: UserLand Frontier/5.1.2-WinNT

<?xml version="1.0"?> <methodResponse> <params> <param> <value><string>South Dakota</string></value> </param> </params> </methodResponse>
```

需要说明的是，XML-RPC 使用 HTTP 作为 RPC 调用的通用传输协议。它不利用任何 HTTP 功能，如缓存、用于错误处理的状态代码或用于协商的标头字段。

### SOAP, WSDL and WS-*

[SOAP](http://www.w3.org/TR/2007/REC-soap12-part1-20070427/)、[WSDL](http://www.w3.org/TR/2007/REC-wsdl20-primer-20070626)、[UDDI](https://www.oasis-open.org/committees/uddi-spec/doc/spec/v3/uddi-v3.0.2-20041019.pdf) 和大量附加扩展（`WS-*`）的堆栈构成了一种更全面的端对端的通信方法，主要基于网络技术。它被广泛使用，在企业环境中尤其流行。如前所述，SOAP 是 XML-RPC 的继承者。它规定了各方之间 XML 编码信息的格式、调用语义和交换模式。各种扩展规范（通常标为 `WS-*`）涉及基于 SOAP 的网络服务的其他功能，如安全或协调。WSDL 是这类网络服务的另一个重要规范。它提供基于 XML 的、机器可读的服务描述，类似于传统 RPC 协议的接口定义语言。UDDI 最初是为网络服务提供注册功能的三方组件，但在实践中几乎完全失去了意义。

尽管 SOAP/WSDL 协议栈通常被称为网络服务协议栈，但它否定了网络的部分原始理念。例如，该协议栈使用 HTTP 作为交换信息的纯通信协议，可以被其他协议取代。与 XML-RPC 类似，这种网络服务栈也不使用 HTTP 作为应用级协议。

### 表征状态传输

表述性状态转移（Representational State Transfer，REST）是一种采用了万维网的基本原理的架构风格。它是由罗伊·T·菲尔丁（Roy T. Fielding）在其博士论文中提出的，并在某种程度上负责 HTTP 规范的制定。`REST` 风格充分利用了 HTTP 的特性。菲尔丁提出了一种以资源为导向的架构：

#### 客户端-服务器

客户端-服务器风格的目的是关注点分离。它促进了用户界面和系统数据存储的分离。它还简化了专用组件的设计，并允许客户端和服务器组件独立发展。

#### 无状态

无状态促进了可扩展性和可靠性。它还能让服务器端的开发变得更容易。

#### 缓存

可选的非共享缓存是一种约束，有助于减少延迟，提高可扩展性和效率。

#### 分层系统

使用分层系统可以实现一系列有趣的架构扩展，如传统封装、负载均衡和（共享）缓存。

#### 按需编码

这一可选约束通过简化客户端更新提供了可扩展性。

#### 统一接口

统一接口是 `REST` 风格最重要的约束，它将资源确定为中心实体，可使用一组固定的动词（HTTP 方法）对其进行操作。这一约束可分为四个子约束：

- 通过在 RESTful 网络服务中使用 URI 来识别资源。
- 通过表示方式对资源进行操作，通过客户端提交修改后的表示来促进资源的变更。
- 自描述消息提供足够的信息，以便可以在没有进一步外部知识的情况下对其进行处理。
- 最重要的是，将超媒体作为应用状态的引擎，促进在表示中使用超媒体。通过访问资源的统一接口和跟随表示中的超链接来触发状态转换。

`REST` 受到广泛关注并在近期大受欢迎，这并不是将其列入本文的唯一原因。`REST` 背后的概念源于 HTTP，并基于 WWW 的经验教训。这些理念提倡松散耦合、无状态通信、可重用性和互操作性。因此，它们为符合 `REST` 风格的架构的可扩展性奠定了坚实的基础。