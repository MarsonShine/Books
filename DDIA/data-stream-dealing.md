消息队列模型

如果生产者发送消息的速度比消费者消费消息的速度快，一般有几种解决方案？

1：消息丢弃；2：阻塞消息，缓存到一定大小的缓冲队列中；3：限流（也叫被压），阻止生产者发送更多的消息。

如果此时缓冲队列中消息满了之后会发生什么情况？无限等待？崩溃？还是将消息写入磁盘 + 异步同步？那么如果采用记录磁盘的方式，又会如何影响消息传递的性能？



如果节点不可用，崩溃，是否会有消息丢失？

消息持久化到磁盘中，并且实现了消息重试，那么这里面都是执行成本的。如果有时候能接受消息丢失，那么换回来的就是消息传递的高吞吐和低延时。

