# 指令集

指令集目前就分为两大派，一个是CISC（Complex Instruction Set Computing，复杂指令集）。另一个是RISC（Reduced Instruction Set Computing，精简指令集）。这两个设计思路完全是两个方向。我们以程序运行时间的公式为说明：

$$程序的CPU运行时间=指令数 * CPI * 时钟周期（其中CPI为每条指令执行的时间）$$

CISC是通过提高指令数来提升CPU整体的执行效率。

RISC是通过缩短每条指令执行的时间来提升CPU整体的执行效率。

## CISC

CISC一个明显的特定就是指令长度是可变的。这是为了提升性能，优化内存而这样设计的。它是通过硬件方面让其支持更多更复杂的指令。这样会带来新的问题，即因为要让硬件支持多且复杂的指令，所以在电路设计上不可避免的增加了复杂度，这就带来了CPU的功耗过大和过热的问题。也正是这两个问题才导致Intel丢失了移动芯片市场，也让RISC架构下的AMD称霸了移动市场。

## RISC

RISC在指令长度上是固定的，是通过减少指令数和简化电路的方式来降低功能。这样复杂的指令就可以通过组合多个简单指令来实现，但同样这就要求更大的内存和寄存器。RISC是通过软件如编译器在编译、运行阶段动态生成对应的指令优化。

## CISC的微指令

CISC后续借鉴了RISC的设计思路，在译码阶段将一条指令翻译成“多个微指令”，这样就能实现定长的指令。然后以简单指令方式传给后续的功能单元（同样也支持乱序，分支预测等）。虽然这样能实现目的，但是也为此付出了一些代价：要硬件支持这些翻译过程，电路就会变得更加复杂，也因此有一份的性能都会耗费这部分上。为此Intel在CPU结构中添加了缓存部件（L0 Cache），将已经翻译过的指令结果存进缓存中，这样下次出现同样的指令就直接去缓存中已翻译的指令即可。但这还是无法改变高功能的事实。