# GPU 和 SIMD(单指令多数据)

之前许多图形系统最初是使用 8 位数据来表示三原色中的一种，再加 8 位数据来表示一个像素的位置。音频采样需要 8 位以上的精度，一般情况 16 位精度完全足够了。

所有未处理器都会对字节和[半字](https://en.wiktionary.org/wiki/halfword)有特殊支持，使其在存储时占用更少的存储器空间。但在典型的整数程序中对这类大小数据的算数运算非常少，因此几乎不支持出数据传输之外的其它操作。后来架构师发现，许多图形和音频应用会对这类数据的向量执行相同的操作。

> 例如分别通过 ASCII 码或二进制来表示同一个整数，如 1000,000,000。那么 ASCII 码每一个值都会占据 8 位，所以总位数 = 10 x 8；
>
> 而二进制表示 1000,000,000 只需要 32 位即可，所以相比之下，用二进制存储数据可以节省 80/32=2.5 倍的内存空间。

**通过在 128 位加法器内划分进位链，处理器可以同时对 16 个 8位操作数、8 个 16 位操作、4 个 32 位操作数或 2 个 64 位操作数的短向量进行并行操作。**

这种在一个宽字内部进行的并行操作称为**子字并行(subword paralleslim)**或是数据级并行(data level paralleslim)。对于单指令多数据，它们也被称为向量或 SIMD。

这种并行计算大多都是通过 GPU 计算加速完成的。

## GPU

最初将 SIMD 指令添加到现有体系架构的理由是：许多微处理器被用于 PC 和工作站中的图形显示器上，以至于越来越多的处理时间都被用在图形处理上。根据摩尔定律，改进图形处理效率就称为了一个值得研究的问题。

而 GPU 主要是用在多媒体行业，如游戏，影音等处理。由于图形和游戏社区与微处理器开发社区的目标不同，所以就衍生出了不一样的技术术语。所以就把图形处理单元就称为 GPU。

GPU 与 CPU 的差别：

- GPU 是作为 CPU 的协处理器，是一个补充的加速器，因此它并不执行 CPU 上的所有任务。它的定位就是处理图形计算。所以 GPU 在执行有些任务的时候处理能力较弱。
- GPU 的问题规模通常为几百 MB 到 GB。
- GPU 不依赖多级缓存来消除内存的长延迟，CPU 是依赖的。GPU 是靠的是**硬件多线程**来隐藏内存延迟。**也就是说在存储器发出请求与数据到达之间的时间里，GPU 执行了数百或上千个独立于该请求的线程。**
- 因此 GPU 的存储器面向的是宽带而不是延迟。
- GPU 需要通过多线程来获取良好的内存带宽，除多线程外，GPU 还可以容纳许多并行处理器（MIMD）。因此每个 GPU 处理器都比传统 CPU 拥有更多的线程。也拥有更多的处理器。

> GPU 内各种形式的并行：多线程、MIMD、SIMD 和指令集并行。以 32 为一组，这些线程被一起阻塞并一起执行。GPU 内部的多线程处理器执行这些线程组，一个 CPU 由 8~32 个这样的多线程处理器组成。