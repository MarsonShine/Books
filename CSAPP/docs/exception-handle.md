# 异常处理

异常分为内部异常和外部异常。指令集体系结构包括三种不同的内部产生的异常：

1. halt 指令
2. 有非法指令和功能码组合的指令
3. 取指或数据独写试图访问一个非法地址

当发生异常时，处理器会调用异常处理程序。并且流水线中的最深的指令发生的异常，其优先级越高。在流水线寄存器中会包括一个**状态码**，如果一条指令在其处理中与某个阶段产生了异常，这个状态字段就被赋予表示异常的标志。该状态和其它指令信息一起沿着流水线传播，直到写回阶段。在写回阶段发现这个表示异常的状态码，就会停止执行。

缺页处理程序：被引用的存储器位置实际上时存储在磁盘存储器上的。这个时候访问这个存储器就会发生缺页异常信号。这个异常会导致处理器调用操作系统的异常处理程序，然后会发起一个**从磁盘到主存的传送操作**。一旦完成，操作系统就会返回到原来的程序，重新执行之前导致缺页的指令，这次由于已经传送到主存来了，所以命中成功。